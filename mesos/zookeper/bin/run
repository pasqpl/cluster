#!/bin/bash
CONTAINER=zookeeper
IMAGE=cluster/zookeeper

function build(){
  docker stop $CONTAINER
  docker rm $CONTAINER
  docker build -t $IMAGE .
  docker tag cluster/zookeeper  localhost:443/cluster/zookeeper
  docker push localhost:443/cluster/zookeeper
}

function create(){
  docker stop $CONTAINER
  docker rm $CONTAINER 
  docker run -d \
   -p 2181:2181 \
   -p 2888:2888 \
   -p 3888:3888 \
   --name $CONTAINER $IMAGE
}

function start(){
  docker start $CONTAINER
}


function stop(){
   docker stop $CONTAINER
}

function status(){
   [ "a"$(echo ruok | nc 127.0.0.1:2181) == "a""imok" ] && echo OK  || echo NOK
}


$@
